---
name: recruitment-processor
description: 自动处理多份招聘markdown文档，识别文档中的图片内容（包括在线图片链接），提取关键信息（职位、薪资、截止时间等），根据用户条件筛选，生成结构化总结报告
dependency:
  python:
    - requests>=2.28.0
---

# 招聘信息处理Skill

## 任务目标
- 本Skill用于：批量处理包含招聘信息的markdown文档，自动识别图片内容（包括本地图片和在线图片链接），提取关键信息，根据条件筛选并生成结构化报告
- 能力包含：图片链接识别、图片下载、图片识别与OCR、文本理解、信息提取、条件匹配、报告生成
- 触发条件：用户提供招聘markdown文档及筛选条件

## 前置准备
- 依赖说明：图片下载功能依赖requests库，版本>=2.28.0

## 操作步骤

### 标准流程

1. **获取输入文档**
   - 从用户提供的路径读取所有markdown格式的招聘文档
   - **必须完整读取所有文档，严禁跳过任何文档**
   - 记录文档列表和数量
   - 对每个文档按顺序编号，确保不遗漏

2. **逐个文档处理**
   对于每个招聘文档，**必须完整处理，不得跳过**：

   **2.1 图片链接识别与提取**
   - 扫描文档中所有图片引用，识别两种格式：
     - 本地图片：`
![alt](local_path.png)
`
     - 在线图片：`
![alt](https://example.com/image.jpg)
`
   - 提取所有图片的URL或路径
   - 记录图片在文档中的位置和上下文

   **2.2 在线图片下载**
   对于每个在线图片链接：
   - 调用 `python /workspace/projects/recruitment-processor/scripts/download_image.py --image-url <URL> --output-dir ./downloaded_images`
   - 捕获下载结果，获取本地保存路径
   - 如下载失败，记录错误但继续处理其他图片
   - 记录图片来源（在线下载/本地文件）

   **2.3 图片识别与内容提取**
   - 对于所有可访问的图片（下载成功的在线图片和本地图片）
   - 使用图像识别能力提取每张图片中的文字信息
   - **必须逐一识别所有图片，不得遗漏任何一张**
   - 记录图片内容与上下文的对应关系
   - 标注每张图片的信息来源

   **2.4 文本理解与整合**
   - 阅读文档文本内容
   - 将图片识别的文字信息与文本内容进行整合理解
   - **确保文本和图片信息都被充分利用**
   - 形成对该招聘文档的完整认知

   **2.5 关键信息提取**
   提取以下信息（如文档中未明确提及某项信息，标注"未提及"）：
   - 职位名称
   - 公司名称
   - 薪资待遇（明确范围或具体数值）
   - 截止时间
   - 发布时间
   - 企业性质（国企/民企/外企/事业单位等）
   - 工作地点
   - 学历要求
   - 工作经验要求
   - 岗位职责
   - 任职要求
   - 图片数量及来源统计

3. **条件筛选**
   - 读取用户提供的筛选条件（参考筛选条件模板格式）
   - 对每个提取出的招聘信息进行条件匹配
   - 严格判断是否符合所有筛选条件
   - 保留所有符合条件的信息，剔除不符合的
   - **每个文档都必须经过筛选判断，不得跳过**

4. **生成总结文档**
   对筛选后的所有招聘信息生成结构化总结报告，包含：

   **4.1 报告概览**
   - 处理的文档总数
   - 成功处理的文档数量
   - 提取的图片总数（在线图片/本地图片）
   - 筛选符合条件的数量
   - 处理时间

   **4.2 招聘信息列表**
   对每个符合条件的招聘信息，按以下格式呈现：

   ```
   ## [职位名称] - [公司名称]

   **基本信息**
   - 薪资待遇：[具体数值或范围]
   - 企业性质：[国企/民企/外企等]
   - 工作地点：[城市/地区]

   **时间信息**
   - 截止时间：[具体日期]
   - 发布时间：[具体日期]

   **要求信息**
   - 学历要求：[学历层次]
   - 工作经验：[年限要求]

   **岗位详情**
   - 岗位职责：[摘要]
   - 任职要求：[摘要]

   **图片信息**
   - 图片总数：[数量]张（在线图片X张，本地图片Y张）
   - 图片来源标注：[哪些关键信息来源于图片]

   ---
   ```

   **4.3 注意事项**
   - 标注信息来源于图片或文本
   - 标注缺失的关键信息
   - 说明图片下载和识别的情况

5. **输出结果**
   - 将总结文档输出为markdown格式
   - 文件名格式：招聘信息总结_YYYYMMDD_HHMMSS.md

## 资源索引
- 必要脚本：见 [scripts/download_image.py](scripts/download_image.py)（用途：从URL下载在线图片，参数：--image-url <URL> --output-dir <目录>）
- 筛选条件模板：见 [references/筛选条件模板.md](references/筛选条件模板.md)（用途：定义筛选条件的标准格式）
- 信息提取指南：见 [references/信息提取指南.md](references/信息提取指南.md)（用途：指导如何准确提取关键信息）

## 注意事项
- **完整性要求**：
  - 必须完整读取所有提供的文档，严禁跳过任何文档
  - 必须逐一识别文档中的所有图片，不得遗漏任何一张
  - 必须处理所有图片链接，包括本地图片和在线图片

- **图片链接处理**：
  - 识别markdown中的图片语法：
![alt](url)
  - 区分本地图片路径和在线URL
  - 在线图片必须先下载到本地再进行识别
  - 下载失败的图片要记录错误但不影响整体处理

- **图片识别准确性**：仔细核对图片提取的文字与上下文的一致性，必要时多次识别确保准确性

- **条件筛选严格性**：用户提出的每个条件都必须严格满足，部分不符合即视为不符合

- **信息缺失处理**：对于文档中未明确提及的信息，必须标注"未提及"，不要主观推断

- **时间格式统一**：所有时间信息统一为YYYY-MM-DD格式

- **薪资格式规范**：薪资信息应包含数值范围和单位（如：15-25K/月，年薪30-40万）

## 使用示例

### 示例1：处理包含在线图片的文档
- **功能说明**：文档中包含在线图片链接，需要先下载再识别
- **执行方式**：智能体调用脚本下载图片 + 智能体识别
- **关键要点**：
  - 识别markdown中的图片URL
  - 调用download_image.py下载图片
  - 识别下载后的图片内容
  - 记录图片来源为"在线下载"
- **筛选条件**：
  ```
  薪资范围：15-25K/月
  企业性质：国企
  ```

### 示例2：按薪资和企业性质筛选
- **功能说明**：筛选薪资范围在15-25K/月的国企岗位
- **执行方式**：智能体处理
- **关键要点**：
  - 严格解析薪资范围和单位
  - 准确识别企业性质关键词
  - 检查所有文档中的图片内容
  - **必须完整处理所有文档，不得跳过**
- **筛选条件**：
  ```
  薪资范围：15-25K/月
  企业性质：国企
  ```

### 示例3：多条件组合筛选
- **功能说明**：筛选北京地区的、本科学历、1-3年经验的技术岗位
- **执行方式**：智能体处理
- **关键要点**：
  - 地点信息可能在正文或图片中
  - 工作经验要求可能模糊表述（如"应届生可"、"有相关经验者优先"），需要准确判断
  - 学历要求可能有多个层次，选取最低要求作为筛选依据
  - 逐一识别所有图片，确保不遗漏关键信息
- **筛选条件**：
  ```
  工作地点：北京
  学历要求：本科及以上
  工作经验：1-3年
  职位类型：技术岗位
  ```

### 示例4：处理混合图片来源的文档
- **功能说明**：文档中同时包含本地图片和在线图片链接
- **执行方式**：智能体调用脚本下载在线图片 + 智能体识别所有图片
- **关键要点**：
  - 区分本地图片和在线图片
  - 下载所有在线图片
  - 逐一识别所有图片（本地+下载）
  - 在总结中标注图片来源
- **筛选条件**：
  ```
  无特殊条件，仅提取信息
  ```

## 图片下载脚本使用说明

### 调用方式
```bash
python /workspace/projects/recruitment-processor/scripts/download_image.py --image-url <图片URL> --output-dir <输出目录>
```

### 参数说明
- `--image-url`：必填，图片的URL地址
- `--output-dir`：可选，图片保存目录，默认为`./downloaded_images`

### 返回结果
- 成功：输出`SUCCESS:<本地路径>`
- 失败：输出`ERROR:<错误信息>`到标准错误流

### 使用场景
当文档中包含在线图片链接（如`https://example.com/image.jpg`）时，先调用此脚本下载图片，然后对下载后的本地文件进行图像识别。

### 示例
```bash
# 下载图片到默认目录
python /workspace/projects/recruitment-processor/scripts/download_image.py --image-url https://example.com/salary.jpg

# 下载图片到指定目录
python /workspace/projects/recruitment-processor/scripts/download_image.py --image-url https://example.com/salary.jpg --output-dir ./temp_images
```
