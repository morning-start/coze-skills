---
name: meta-skill-manager
description: 高阶技能管理系统，支持技能生命周期管理、整合拆分与工作流编排；当用户需要创建、修改、更新技能，整合多个技能，拆分技能能力，或生成标准化工作流时使用
---

# Meta Skill Manager

## 任务目标
- 本 Skill 用于: 全生命周期技能管理，包括创建、修改、更新、版本控制，以及技能整合、拆分与工作流编排
- 能力包含: 
  - 技能生命周期管理（创建、修改、更新、版本控制）
  - 技能整合（2+技能合并为新技能）
  - 技能拆分（将技能能力分解到多个新技能）
  - 工作流生成（多技能编排为标准化 WORKFLOW.md）
- 触发条件: 
  - 用户需要创建、修改、更新或管理技能版本
  - 用户需要将多个技能整合为一个新技能
  - 用户需要拆分技能为多个独立技能
  - 用户需要根据技能和目标生成工作流文档

## 操作步骤

### 一、技能生命周期管理

#### 1.1 创建新技能
1. **需求分析**
   - 理解用户目标、使用场景、约束条件
   - 识别技能核心能力和边界
   - 确定触发条件和适用场景

2. **定义技能结构**
   - 确定技能名称（小写字母+连字符，不以 -skill 结尾）
   - 编写技能描述（100-150字符，单行，包含核心价值与触发场景）
   - 定义能力列表（capabilities）
   - 设计操作步骤（标准流程和可选分支）

3. **编写 SKILL.md**
   - 生成 YAML 前言区（name、description、可选依赖）
   - 编写 Markdown 正文（任务目标、操作步骤、资源索引、注意事项）
   - 添加使用示例

4. **规范化检查**
   - 检查命名规范
   - 验证描述长度和格式
   - 确保目录结构符合标准

#### 1.2 修改现有技能
1. **读取并分析**
   - 读取现有 SKILL.md 内容
   - 分析当前能力、流程和结构
   - 理解设计意图和约束

2. **确定修改范围**
   - 明确需要修改的部分（能力、流程、描述、资源等）
   - 评估修改对现有能力的影响
   - 识别需要同步更新的关联内容

3. **执行修改**
   - 修改目标内容
   - 同步更新所有关联部分
   - 保持格式和结构一致性

4. **验证修改**
   - 确保修改后技能仍然可用
   - 检查是否引入新的问题
   - 验证文档完整性

#### 1.3 更新技能
1. **评估更新需求**
   - 分析新需求与现有技能的差异
   - 确定是增量更新还是重构
   - 评估更新影响范围

2. **设计更新方案**
   - 规划新增能力和功能
   - 识别需要调整的部分
   - 制定平滑过渡策略

3. **执行更新**
   - 实现新增功能
   - 调整现有流程
   - 更新文档和示例

#### 1.4 版本控制
1. **确定版本变更类型**
   - 破坏性变更（major）：移除能力、接口改变 → 版本号 +1.0.0
   - 新增功能（minor）：添加能力、不破坏兼容 → 版本号 +0.1.0
   - 错误修复（patch）：Bug 修复、文档更新 → 版本号 +0.0.1

2. **记录变更内容**
   - 新增能力列表
   - 修改内容说明
   - 移除内容说明
   - 影响范围分析

3. **更新版本信息**
   - 在 metadata 中更新 version 字段
   - 添加 changelog 记录
   - 更新 SKILL.md 中相关描述

---

### 二、技能整合

#### 2.1 分析待整合技能
1. **逐一理解每个技能**
   - 读取每个技能的 SKILL.md
   - 提取核心能力（capabilities）
   - 理解输入输出接口
   - 识别依赖和约束

2. **识别能力重叠和互补**
   - 找出重复能力（考虑去重）
   - 识别互补能力（增强组合）
   - 发现能力冲突（需要调和）

3. **评估兼容性**
   - 检查命名冲突
   - 分析依赖冲突
   - 评估接口兼容性

#### 2.2 设计整合方案
1. **选择整合策略**
   - **顺序整合**: 技能按固定顺序执行（前一个输出作为后一个输入）
   - **并行整合**: 技能同时执行，结果合并
   - **嵌套整合**: 将子技能嵌入主技能特定位置
   - **混合整合**: 组合使用多种策略

2. **设计新技能结构**
   - 确定新技能名称（体现整合特性）
   - 编写整合描述（说明整合了哪些能力）
   - 定义整合后的能力列表
   - 设计整合后的操作流程

3. **定义接口和映射**
   - 设计统一的输入接口
   - 定义技能间的数据映射关系
   - 设计输出格式
   - 规划错误处理机制

#### 2.3 生成整合技能
1. **创建 SKILL.md**
   - 编写整合后的技能定义
   - 说明整合的原始技能
   - 描述整合逻辑和流程
   - 添加使用示例

2. **参考整合模式**
   - 参见 [references/composition-patterns.md](references/composition-patterns.md) 了解顺序、并行、嵌套等组合模式
   - 根据场景选择合适的整合策略

---

### 三、技能拆分

#### 3.1 分析原技能
1. **提取能力清单**
   - 从 capabilities 中提取所有能力
   - 从操作步骤中提取子流程
   - 从资源索引中提取独立功能

2. **评估拆分可行性**
   - 识别可独立运行的能力
   - 评估能力间的依赖关系
   - 确定最小拆分粒度

3. **识别拆分点**
   - 按功能模块拆分（如：数据提取 vs 数据分析）
   - 按使用场景拆分（如：批量处理 vs 实时处理）
   - 按复杂度拆分（如：简单 vs 高级功能）

#### 3.2 设计拆分方案
1. **确定新技能数量和定位**
   - 拆分出 2+ 个独立技能
   - 为每个新技能定义明确的职责
   - 确保每个技能有独立的使用价值

2. **分配能力和资源**
   - 将能力分配到各个新技能
   - 分配相关资源（脚本、参考文档、资产）
   - 定义新技能间的协作关系

3. **设计接口契约**
   - 定义技能间的调用接口
   - 设计数据传递格式
   - 明确错误处理机制

#### 3.3 生成拆分后的技能
1. **为每个新技能创建 SKILL.md**
   - 编写独立的技能定义
   - 描述拆分来源（可选）
   - 定义独立的使用流程
   - 添加独立的使用示例

2. **更新原技能（可选）**
   - 可选择保留原技能作为组合入口
   - 或标记原技能为 deprecated
   - 提供迁移指南

---

### 四、工作流生成

#### 4.1 理解目标和技能
1. **明确工作目标**
   - 理解用户要达成的最终目标
   - 识别关键输出和交付物
   - 确定约束条件（时间、资源、质量要求）

2. **分析可用技能**
   - 列出所有可用技能
   - 提取每个技能的核心能力
   - 识别技能的输入输出格式

3. **评估技能与目标的匹配度**
   - 识别直接匹配的技能
   - 识别需要组合的技能
   - 发现能力缺口（可能需要创建新技能）

#### 4.2 设计工作流
1. **确定工作流类型**
   - **线性工作流**: 步骤依次执行
   - **分支工作流**: 根据条件选择不同路径
   - **并行工作流**: 多个步骤同时执行
   - **循环工作流**: 包含迭代或重复步骤
   - **混合工作流**: 组合多种类型

2. **编排技能执行顺序**
   - 确定技能执行依赖关系
   - 设计步骤顺序和条件
   - 定义并行和串行步骤

3. **设计数据流转**
   - 定义每个步骤的输入
   - 确定步骤间的数据传递
   - 设计中间结果存储

#### 4.3 生成 WORKFLOW.md
1. **编写 WORKFLOW.md 结构**

```markdown
---
name: <workflow-name>
description: <工作流描述>
target: <目标说明>
skills_required: [skill-1, skill-2, skill-3]
---

# <工作流名称>

## 目标
<详细描述工作流要达成的目标>

## 前置条件
- <条件1>
- <条件2>

## 技能清单
- <skill-1>: <用途说明>
- <skill-2>: <用途说明>

## 执行流程

### 步骤 1: <步骤名称>
- **使用技能**: <skill-name>
- **输入**: <输入描述>
- **操作**: <具体操作说明>
- **输出**: <输出描述>
- **下一步**: <下一步骤>

### 步骤 2: <步骤名称>
...

## 异常处理
- <异常情况1>: <处理方式>
- <异常情况2>: <处理方式>

## 输出交付物
- <交付物1>
- <交付物2>

## 示例
<完整示例说明>
```

2. **详细说明每个步骤**
   - 明确使用的技能
   - 描述具体操作
   - 定义输入输出
   - 说明步骤间关系

3. **添加异常处理**
   - 识别可能的异常
   - 设计容错机制
   - 提供回退方案

4. **参考工作流模式**
   - 参见 [references/workflow-patterns.md](references/workflow-patterns.md) 了解标准工作流模式

---

## 资源索引
- 领域参考:
  - [references/skill-standards.md](references/skill-standards.md) (何时读取: 生成技能定义时参考格式规范、命名规则、目录结构)
  - [references/composition-patterns.md](references/composition-patterns.md) (何时读取: 整合技能时参考顺序、并行、嵌套等组合模式)
  - [references/workflow-patterns.md](references/workflow-patterns.md) (何时读取: 生成工作流时参考标准工作流模式和结构)

## 注意事项
- 充分利用智能体的语言理解、推理和内容生成能力完成所有任务
- 技能生命周期管理注重规范性，遵循标准格式和版本控制
- 技能整合注重能力互补和接口兼容性，避免功能重复和冲突
- 技能拆分注重单一职责原则，确保每个新技能有独立价值
- 工作流生成注重可操作性和完整性，明确每个步骤的输入输出
- 所有操作均为纯自然语言指导，无脚本依赖
- 生成文档时保持格式一致性，便于后续维护和复用

## 使用示例

### 示例1: 技能生命周期管理
用户说"创建一个数据清洗技能，然后更新它添加数据验证功能"
1. **创建阶段**:
   - 生成 data-cleaner 技能定义
   - 定义能力：数据清洗、缺失值处理、格式标准化
   - 编写操作步骤和示例
2. **更新阶段**:
   - 分析新增需求：数据验证能力
   - 确定为 minor 版本更新（1.0.0 → 1.1.0）
   - 更新 capabilities，添加数据验证流程
   - 更新 changelog

### 示例2: 技能整合
用户说"把数据清洗、数据分析和报告生成三个技能整合成一个数据分析套件"
1. **分析阶段**:
   - 读取三个技能的定义
   - 提取能力：清洗、分析、可视化
   - 识别顺序依赖：清洗 → 分析 → 报告
2. **设计阶段**:
   - 选择顺序整合策略
   - 定义统一输入接口（原始数据）
   - 设计数据映射：清洗输出 → 分析输入 → 报告输入
3. **生成阶段**:
   - 创建 data-analysis-suite 技能
   - 描述整合逻辑
   - 提供端到端使用示例

### 示例3: 技能拆分
用户说"这个数据处理技能太复杂了，把它拆分成独立的清洗和分析技能"
1. **分析阶段**:
   - 提取原技能能力清单
   - 识别可拆分点：清洗模块 vs 分析模块
2. **设计阶段**:
   - 拆分为 data-cleaner 和 data-analyzer 两个技能
   - 分配能力：清洗技能负责清洗，分析技能负责分析
   - 设计接口：清洗输出作为分析输入
3. **生成阶段**:
   - 分别为两个技能创建 SKILL.md
   - 更新原技能为组合入口（可选）

### 示例4: 工作流生成
用户说"我想用数据获取、清洗、分析、报告技能完成一个市场分析报告，帮我生成工作流"
1. **分析阶段**:
   - 目标：生成市场分析报告
   - 技能：data-fetcher、data-cleaner、data-analyzer、report-generator
2. **设计阶段**:
   - 确定线性工作流
   - 编排顺序：获取 → 清洗 → 分析 → 报告
   - 设计数据流转
3. **生成阶段**:
   - 创建 WORKFLOW.md
   - 详细说明每个步骤
   - 添加异常处理和示例

### 示例5: 复杂场景
用户说"帮我管理这些技能：创建一个新技能，整合现有两个技能，然后生成一个工作流"
1. **创建技能**: skill-a（基础能力）
2. **整合技能**: 将 skill-a 和 skill-b 整合为 skill-combined
3. **拆分技能**: 将 skill-combined 拆分为 skill-x 和 skill-y
4. **生成工作流**: 使用 skill-x、skill-y、skill-c 生成完整工作流
