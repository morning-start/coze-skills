---
name: scenario-optimize
description: 优化技能场景指南，定义技能优化的完整流程，包含优化策略选择和质量提升方法
tags: [scenario, optimize, refactoring, quality-improvement, lifecycle]
---

# 场景：优化技能

本文档定义优化现有技能的完整流程，包含优化策略选择、质量评估和提升方法。

---

## 场景概述

**适用场景**: 提升技能质量、重构技能结构、应用设计模式
**生命周期**: 设计(Design) → 开发(Develop) → 测试(Test) → 发布(Release)
**预计耗时**: 30-90 分钟
**输出物**: 优化后的 SKILL.md + 质量提升报告

---

## 第一步：查阅信息 (Research)

### 1.1 评估当前质量

**常见问题识别**:
| 问题类型 | 症状 | 优化策略 |
|---------|------|---------|
| 职责过多 | 一个技能包含7+能力 | 原子化拆分 |
| 接口混乱 | 输入输出不清晰 | 标准化接口 |
| 描述不清 | description 不符合规范 | 优化描述 |
| 示例不足 | 少于2个示例 | 示例补充 |

### 1.2 确定优化目标

**优化目标模板**:
```yaml
优化目标:
  重点优化项:
    - [描述优化]
    - [示例补充]
    - [结构调整]
  预期改进:
    - [具体改进点1]
    - [具体改进点2]
```

---

## 第二步：执行操作 (Execute)

### 阶段 1: 设计阶段 (Design)

**准入条件**: 质量问题已识别，优化目标已确定

**操作步骤**:

1. **选择优化策略**

   **策略选择矩阵**:
   | 问题 | 策略 | 说明 |
   |------|------|------|
   | 职责过多 | 原子化 | 拆分为单一职责技能 |
   | 接口混乱 | 标准化 | 统一输入输出格式 |
   | 元信息缺失 | 元数据增强 | 补充描述、标签、用例 |
   | 层次不清 | 分层抽象 | 构建技能层级 |
   | 错误处理弱 | 错误处理 | 添加异常处理 |
   | 示例不足 | 示例补充 | 添加更多示例 |

2. **设计优化方案**
   ```yaml
   优化方案:
     策略: [原子化/标准化/元数据增强/分层/错误处理]
     具体措施:
       - [措施1]
       - [措施2]
     预期效果:
       描述清晰度: +20%
       示例完整性: +30%
       结构合理性: +15%
   ```

**准出条件**:
- [ ] 优化策略已选择
- [ ] 优化方案已设计

### 阶段 2: 开发阶段 (Develop)

**准入条件**: 优化方案已设计

**操作步骤**:

1. **执行优化**

   **策略 A: 原子化拆分**
   ```yaml
   # 原技能: data-processor (7个能力)
   # 拆分后:
   skills:
     - data-reader: 数据读取
     - data-cleaner: 数据清洗
     - data-transformer: 数据转换
     - data-analyzer: 数据分析
     - data-exporter: 数据导出
   ```

   **策略 B: 标准化接口**
   ```yaml
   # 统一输入格式
   input_schema:
     data: [数据内容]
     options: [配置选项]
   
   # 统一输出格式
   output_schema:
     result: [处理结果]
     metadata: [处理元信息]
     errors: [错误列表]
   ```

   **策略 C: 描述优化**
   ```yaml
   ---
   name: skill-name
   description: [优化后的描述，100-150字符]
   tags: [tag1, tag2, tag3]
   reliability_score: 0.95
   cost_estimate: low
   ---
   ```

2. **更新元信息**
   ```yaml
   version: v1.1.0  # 优化版本
   version_history:
     - version: v1.1.0
       date: 2024-03-15
       type: feature
       changes: 
         - "应用原子化拆分"
         - "优化接口标准化"
   ```

**准出条件**:
- [ ] 优化已执行

### 阶段 3: 测试阶段 (Test)

**准入条件**: 开发阶段已完成

**操作步骤**:

1. **重新评估质量**
   - [ ] 描述符合规范（100-150字符）
   - [ ] 示例完整可执行
   - [ ] 结构清晰合理

2. **对比优化效果**
   ```
   优化效果对比:
   ┌───────────────┬─────────┬─────────┬────────┐
   │ 指标          │ 优化前  │ 优化后  │ 提升   │
   ├───────────────┼─────────┼─────────┼────────┤
   │ 描述清晰度    │ 一般    │ 良好    │ +20%   │
   │ 示例完整性    │ 不足    │ 完整    │ +30%   │
   │ 结构合理性    │ 一般    │ 良好    │ +15%   │
   └───────────────┴─────────┴─────────┴────────┘
   ```

**准出条件**:
- [ ] 优化目标达成

### 阶段 4: 发布阶段 (Release)

**准入条件**: 测试阶段已完成

**操作步骤**:

1. **生成优化报告**
   ```markdown
   ## 优化报告
   
   ### 优化措施
   1. 原子化拆分: 将7个能力拆分为5个独立技能
   2. 标准化接口: 统一输入输出格式
   3. 描述优化: 完善description和tags
   
   ### 优化效果
   - 描述清晰度: 一般 → 良好 (+20%)
   - 示例完整性: 不足 → 完整 (+30%)
   - 结构合理性: 一般 → 良好 (+15%)
   
   ### 结论
   ✅ 优化目标达成，技能质量显著提升
   ```

2. **发布优化版本**
   ```bash
   git add .
   git commit -m "refactor(skill-name): 应用优化策略提升质量"
   git tag -a v1.1.0 -m "Release v1.1.0: 优化版本"
   ```

**准出条件**:
- [ ] 优化报告生成
- [ ] 版本已发布

---

## 第三步：检查验收 (Validate)

### 3.1 质量提升检查

```yaml
检查清单:
  优化效果:
    - [ ] 描述符合规范（100-150字符）
    - [ ] 示例完整可执行
    - [ ] 结构清晰合理
  
  优化措施:
    - [ ] 优化策略已应用
    - [ ] 无引入新问题
```

### 3.2 最终验证

```bash
# 验证质量评分
grep -A 5 "quality:" SKILL.md

# 验证版本历史
grep -A 3 "v1.1.0" SKILL.md

# 验证优化报告存在
ls optimization-report.md
```

---

## 优化策略详解

### 策略 1: 原子化拆分

**适用场景**: 技能职责过多（>5个核心能力）

**拆分原则**:
- 每个技能单一职责
- 技能间松耦合
- 可独立使用

**示例**:
```yaml
# 拆分前
data-processor:
  capabilities: [读取, 清洗, 转换, 分析, 验证, 报告, 导出]

# 拆分后
data-reader: [读取]
data-cleaner: [清洗]
data-transformer: [转换]
data-analyzer: [分析]
data-validator: [验证]
```

### 策略 2: 标准化接口

**适用场景**: 接口定义不清晰

**标准化内容**:
- 输入参数格式
- 输出结果格式
- 错误码定义

### 策略 3: 元数据增强

**适用场景**: 元信息不完整

**增强内容**:
- use_cases: 使用场景
- tags: 标签
- reliability_score: 可靠性评分
- cost_estimate: 成本估算

---

## 参考文档

- [skill-standards.md](skill-standards.md) - 标准化规范

- [skill-standards.md](skill-standards.md) - 质量评估（详见"质量检查清单"章节）
