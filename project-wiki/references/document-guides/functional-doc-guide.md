# 功能文档指南

## 目录

- [文档概述](#文档概述)
- [编写目的](#编写目的)
- [文档结构](#文档结构)
- [编写规范](#编写规范)
- [智能推断](#智能推断)
- [示例](#示例)

---

## 文档概述

功能文档是渐进式文档体系的**第一层**，用于收集和整理用户的功能需求。用户以自然语言描述功能，智能体自动进行意图推断和总结。

### 核心特点

- **自由描述**：用户可以用自然语言自由描述功能，无需遵循严格格式
- **智能推断**：智能体自动识别用户意图、提取关键信息
- **自动总结**：生成结构化的功能总结
- **向后传递**：为需求文档和架构文档提供基础

### 适用场景

- 新功能需求收集
- 功能迭代记录
- 功能需求讨论
- 功能规格说明

---

## 编写目的

功能文档的主要目的是：

1. **需求收集**：清晰记录用户的功能需求
2. **意图识别**：明确用户的真实意图和期望
3. **沟通桥梁**：作为用户与技术团队之间的沟通桥梁
4. **文档溯源**：为后续的需求和架构设计提供可追溯的来源

---

## 文档结构

### 标准结构

```markdown
# [功能名称]

## 功能描述
[用户对功能的详细描述，自由文本]

## 功能背景
[功能的业务背景和使用场景]

## 目标用户
[功能的目标用户群体]

## 功能价值
[功能带来的业务价值和收益]

## 用户场景
[具体的使用场景描述]

## 功能优先级
- [ ] P0 - 核心功能，必须实现
- [ ] P1 - 重要功能，应该实现
- [ ] P2 - 一般功能，可以延后
- [ ] P3 - 优化功能，暂不实现

## 预期成果
[功能完成后预期的成果和效果]

## 相关功能
[与现有功能或其他需求的关系]

---

## 智能推断结果
> 以下内容由智能体自动生成

### 意图识别
[智能体识别的用户意图]

### 关键信息提取
- [提取的关键点 1]
- [提取的关键点 2]

### 功能总结
[结构化的功能总结]

### 推荐下一步
[建议下一步操作：生成需求文档]
```

### 结构说明

| 章节 | 说明 | 填写方式 |
|------|------|----------|
| 功能名称 | 功能的简短名称 | 用户填写 |
| 功能描述 | 详细的功能描述 | 用户填写（自由文本） |
| 功能背景 | 业务背景和场景 | 用户填写 |
| 目标用户 | 功能的使用者 | 用户填写 |
| 功能价值 | 业务价值说明 | 用户填写 |
| 用户场景 | 使用场景描述 | 用户填写 |
| 功能优先级 | 实现优先级 | 用户填写 |
| 预期成果 | 预期效果 | 用户填写 |
| 相关功能 | 功能关系 | 用户填写 |
| **智能推断结果** | **自动生成** | **智能体生成** |

---

## 编写规范

### 1. 功能描述

**原则**：清晰、具体、可理解

**示例**：
```
✅ 好的描述：
用户希望能够通过手机号快速登录系统，不需要记忆密码。
登录过程应该简单、安全，支持短信验证码登录。

❌ 不好的描述：
做个登录功能。
```

### 2. 功能背景

**原则**：说明为什么需要这个功能

**包含内容**：
- 当前问题或痛点
- 业务驱动因素
- 市场竞争压力
- 用户反馈

### 3. 目标用户

**原则**：明确功能的使用者

**示例**：
- 所有注册用户
- VIP 用户
- 管理员
- 第三方合作伙伴

### 4. 功能价值

**原则**：量化价值，说明收益

**示例**：
- 提升用户注册转化率 20%
- 降低用户流失率 15%
- 提升操作效率 30%

### 5. 用户场景

**原则**：描述具体的用户行为

**示例**：
```
场景 1：新用户注册
用户在注册页面选择手机号登录，输入手机号后，
系统发送短信验证码，用户输入验证码后完成登录。

场景 2：老用户登录
用户在登录页面输入已绑定的手机号，系统发送验证码，
用户输入验证码后完成登录，无需输入密码。
```

### 6. 功能优先级

**优先级说明**：
- **P0（必须）**：核心功能，缺失会导致产品无法使用
- **P1（重要）**：重要功能，影响用户体验
- **P2（一般）**：次要功能，可以延后实现
- **P3（优化）**：优化功能，暂不实现

### 7. 预期成果

**原则**：可衡量、可验证

**示例**：
- 用户可以通过手机号完成登录
- 登录成功率 > 95%
- 登录平均时间 < 3 秒

---

## 智能推断

智能体会自动分析功能描述，生成以下内容：

### 1. 意图识别

识别用户的真实意图，例如：
- 功能类型（新增/修改/删除/查询）
- 操作对象（用户/订单/商品）
- 核心诉求（便捷性/安全性/效率）

### 2. 关键信息提取

从描述中提取关键信息：
- 功能核心点
- 技术要求
- 约束条件
- 非功能性需求

### 3. 功能总结

生成结构化的功能总结，包括：
- 功能概述
- 核心能力
- 关键约束
- 成功标准

### 4. 推荐下一步

根据功能内容，推荐下一步操作：
- 生成需求文档
- 补充功能描述
- 评估可行性

---

## 示例

### 示例：手机号快速登录功能

```markdown
# 手机号快速登录功能

## 功能描述
用户希望能够通过手机号快速登录系统，不需要记忆密码。
登录过程应该简单、安全，支持短信验证码登录。
用户可以绑定多个手机号，可以选择任意一个手机号登录。

## 功能背景
当前系统使用账号密码登录，用户经常忘记密码，导致登录失败率高。
短信验证码登录更符合用户习惯，可以提升登录成功率和用户体验。

## 目标用户
- 所有注册用户
- 新注册用户
- 老用户（忘记密码的用户）

## 功能价值
- 提升用户登录成功率 20%
- 降低用户流失率 10%
- 提升用户满意度

## 用户场景

### 场景 1：新用户注册
用户在注册页面选择手机号登录，输入手机号后，
系统发送短信验证码，用户输入验证码后完成登录。

### 场景 2：老用户登录
用户在登录页面输入已绑定的手机号，系统发送验证码，
用户输入验证码后完成登录，无需输入密码。

### 场景 3：绑定新手机号
用户在个人中心添加新的手机号，系统发送验证码，
用户输入验证码后完成绑定。

## 功能优先级
- [x] P0 - 核心功能，必须实现

## 预期成果
- 用户可以通过手机号完成登录
- 用户可以绑定多个手机号
- 登录成功率 > 95%
- 登录平均时间 < 3 秒
- 短信验证码 60 秒内到达

## 相关功能
- 账号密码登录
- 短信服务
- 用户管理

---

## 智能推断结果
> 以下内容由智能体自动生成

### 意图识别
- **功能类型**：新增功能
- **操作对象**：用户登录
- **核心诉求**：便捷性、安全性

### 关键信息提取
- 支持手机号登录
- 支持多个手机号绑定
- 使用短信验证码
- 无需记忆密码
- 追求登录成功率 > 95%

### 功能总结
**功能概述**：
为用户提供基于手机号的快速登录方式，使用短信验证码进行身份验证，用户无需记忆密码，可以绑定多个手机号。

**核心能力**：
1. 手机号登录（支持多个手机号）
2. 短信验证码发送与验证
3. 手机号绑定管理

**关键约束**：
- 登录成功率 > 95%
- 登录平均时间 < 3 秒
- 短信验证码 60 秒内到达

**成功标准**：
- 用户可以通过手机号完成登录
- 短信验证码准确到达
- 登录流程流畅

### 推荐下一步
✅ 建议生成需求文档，进行深度分析：
```bash
python3 scripts/generate_progressive_doc.py --type requirement --source functional-docs/手机号快速登录功能.md
```
```

---

## 最佳实践

1. **描述要具体**：避免模糊的描述，要具体说明功能细节
2. **场景要完整**：覆盖主要的使用场景
3. **价值要量化**：尽可能量化功能和价值
4. **优先级要明确**：明确功能的实现优先级
5. **相关功能要标注**：标注与现有功能的关系

---

## 相关文档

- [需求文档指南](requirement-doc-guide.md)
- [架构文档指南](architecture-doc-guide.md)
- [功能文档模板](../templates/functional-doc-template.md)
- [渐进式文档生成器](../../scripts/generate_progressive_doc.py)
