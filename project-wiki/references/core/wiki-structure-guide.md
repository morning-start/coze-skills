# Wiki 结构规范指南

## 目录

1. [复杂度评估](#复杂度评估)
2. [结构模式选择](#结构模式选择)
3. [简单模式（平铺结构）](#简单模式平铺结构)
4. [复杂模式（分层结构）](#复杂模式分层结构)
5. [模块文件夹规则](#模块文件夹规则)
6. [命名规范](#命名规范)
7. [必选文档](#必选文档)
8. [可选文档](#可选文档)

---

## 复杂度评估

### 评估维度

项目复杂度从 5 个维度评估，每个维度 0-2 分，总分 0-10 分：

| 维度 | 0 分 | 1 分 | 2 分 |
|------|------|------|------|
| **文件数量** | < 50 | 50-200 | > 200 |
| **模块数量** | < 5 | 5-15 | > 15 |
| **依赖复杂度** | < 10 | 10-30 | > 30 |
| **框架数量** | 0-1 | 2-3 | > 3 |
| **目录深度** | < 3 层 | 3-5 层 | > 5 层 |

### 复杂度等级

**总分 0-3 分**：简单项目
- 推荐结构：平铺结构（所有文档单层目录）

**总分 4-7 分**：中等项目
- 推荐结构：分层结构（按文档类型分类）

**总分 8-10 分**：复杂项目
- 推荐结构：分层结构 + 模块文件夹

---

## 结构模式选择

### 简单模式适用场景

✅ 适合以下情况：
- 文件数量 < 50
- 模块数量 < 5
- 单一框架
- 目录结构简单（< 3 层）

✅ 优点：
- 结构简单，易于导航
- 适合快速浏览
- 维护成本低

❌ 缺点：
- 文档数量较多时显得混乱
- 缺少分类结构

---

### 复杂模式适用场景

✅ 适合以下情况：
- 文件数量 ≥ 50
- 模块数量 ≥ 5
- 多框架组合
- 目录结构复杂（≥ 3 层）

✅ 优点：
- 分类清晰，易于查找
- 支持模块化文档
- 便于扩展和维护

❌ 缺点：
- 结构稍复杂，需要导航页
- 创建初期工作量较大

---

## 简单模式（平铺结构）

### 目录结构

```
wiki/
├── README.md              # 首页（项目概览）
├── CHANGELOG.md           # 版本变更历史（必选）
├── ROADMAP.md             # 发展规划（推荐）
├── 架构.md                # 架构设计
├── API.md                 # API 文档
├── 部署.md                # 部署指南
├── 开发指南.md            # 开发指南
└── 常见问题.md            # 常见问题
```

### 文档说明

| 文件 | 必选 | 内容 | 生成方式 |
|------|------|------|----------|
| README.md | ✅ | 项目简介、快速开始、目录导航 | 智能体生成 |
| CHANGELOG.md | ✅ | 版本变更历史 | 脚本生成 + 智能体填充 |
| ROADMAP.md | ⭕ | 发展规划和未来计划 | 脚本生成 + 智能体规划 |
| 架构.md | ✅ | 系统架构、模块关系、技术栈 | 智能体生成 |
| API.md | ⭕ | API 端点、参数、响应格式 | 智能体生成 |
| 部署.md | ⭕ | 部署步骤、环境配置、常见问题 | 智能体生成 |
| CI-CD.md | ⭕ | CI/CD 流程和配置（可选） | 脚本生成 + 智能体补充 |
| 开发指南.md | ⭕ | 开发环境、代码规范、贡献指南 | 智能体生成 |
| 常见问题.md | ❌ | FAQ、故障排查 | 智能体生成 |
|------|------|------|
| README.md | ✅ | 项目简介、快速开始、目录导航 |
| CHANGELOG.md | ✅ | 版本变更历史 |
| 架构.md | ✅ | 系统架构、模块关系、技术栈 |
| API.md | ⭕ | API 端点、参数、响应格式 |
| 部署.md | ⭕ | 部署步骤、环境配置、常见问题 |
| 开发指南.md | ⭕ | 开发环境、代码规范、贡献指南 |
| 常见问题.md | ❌ | FAQ、故障排查 |

### CHANGELOG.md 说明

**必选文档**：记录所有版本变更

**内容**：
- 版本号（遵循 Semantic Versioning）
- 发布日期
- 变更类型（Added/Changed/Deprecated/Removed/Fixed/Security）
- 变更描述

**规范**：参考 [changelog-guide.md](changelog-guide.md)

**自动生成**：
```bash
# 生成初始 Changelog
python3 scripts/generate_changelog.py --path ./your-project

# 添加新版本条目
python3 scripts/generate_changelog.py --path ./your-project --version 1.0.0

# 从 Git log 生成变更记录
python3 scripts/generate_changelog.py --path ./your-project --from-git
```

### README.md 模板

```markdown
# 项目名称

## 项目简介
[一句话描述项目]

## 快速开始
```bash
# 安装依赖
npm install

# 启动项目
npm start
```

## 文档导航
- [架构设计](架构.md)
- [CHANGELOG](CHANGELOG.md)
- [ROADMAP](ROADMAP.md)
- [API 文档](API.md)
- [部署指南](部署.md)
- [开发指南](开发指南.md)
- [常见问题](常见问题.md)
```

---

## 复杂模式（分层结构）

### 目录结构

```
wiki/
├── README.md              # 首页索引
├── 01-概览/
│   ├── 项目介绍.md
│   ├── 架构设计.md
│   ├── 技术栈.md
│   ├── 快速开始.md
│   ├── CHANGELOG.md       # 必选
│   └── ROADMAP.md         # 推荐
├── 02-开发指南/
│   ├── 开发环境.md
│   ├── 开发规范.md
│   ├── 代码贡献.md
│   └── 调试技巧.md
├── 03-API文档/
│   ├── 用户API.md
│   ├── 管理API.md
│   ├── 内部API.md
│   └── 数据模型.md
├── 04-模块文档/
│   ├── 用户模块/
│   │   ├── 模块介绍.md
│   │   ├── API文档.md
│   │   └── 使用示例.md
│   ├── 订单模块/
│   └── 支付模块/
├── 05-部署运维/
│   ├── 部署指南.md
│   ├── 运维手册.md
│   └── 监控告警.md
└── 06-常见问题/
    ├── FAQ.md
    └── 故障排查.md
```

### 文件夹说明

| 文件夹 | 内容 | 说明 | 生成方式 |
|--------|------|------|----------|
| 01-概览 | 项目整体介绍 | 项目介绍、架构、技术栈、快速开始、变更日志、发展规划 | 智能体生成 + 脚本辅助 |
| 02-开发指南 | 开发相关文档 | 环境配置、代码规范、贡献指南 | 智能体生成 |
| 03-API文档 | API 接口文档 | 按模块分类的 API 文档 | 智能体生成 |
| 04-模块文档 | 模块详细文档 | 复杂模块的独立文档文件夹 | 智能体生成 |
| 05-部署运维 | 部署和运维文档 | 部署指南、运维手册、监控告警、CI/CD 文档 | 智能体生成 + 脚本辅助 |
| 06-常见问题 | FAQ 和故障排查 | 常见问题、故障排查 | 智能体生成 |

### README.md 模板

```markdown
# 项目名称 - Wiki

## 快速导航

### 概览
- [项目介绍](01-概览/项目介绍.md)
- [架构设计](01-概览/架构设计.md)
- [技术栈](01-概览/技术栈.md)
- [快速开始](01-概览/快速开始.md)
- [CHANGELOG](01-概览/CHANGELOG.md)
- [ROADMAP](01-概览/ROADMAP.md)

### 开发指南
- [开发环境](02-开发指南/开发环境.md)
- [开发规范](02-开发指南/开发规范.md)
- [代码贡献](02-开发指南/代码贡献.md)
- [调试技巧](02-开发指南/调试技巧.md)

### API 文档
- [用户 API](03-API文档/用户API.md)
- [管理 API](03-API文档/管理API.md)
- [内部 API](03-API文档/内部API.md)
- [数据模型](03-API文档/数据模型.md)

### 模块文档
- [用户模块](04-模块文档/用户模块/模块介绍.md)
- [订单模块](04-模块文档/订单模块/模块介绍.md)
- [支付模块](04-模块文档/支付模块/模块介绍.md)

### 部署运维
- [部署指南](05-部署运维/部署指南.md)
- [运维手册](05-部署运维/运维手册.md)
- [监控告警](05-部署运维/监控告警.md)
- [CI/CD](05-部署运维/CI-CD.md)

### 常见问题
- [FAQ](06-常见问题/FAQ.md)
- [故障排查](06-常见问题/故障排查.md)

---

## 快速开始
[快速开始](01-概览/快速开始.md)
```

---

## 模块文件夹规则

### 何时创建模块文件夹

✅ 需要创建模块文件夹的情况：
- 模块有 **3 个或更多** 相关文档
- 模块功能复杂，需要详细说明
- 模块包含多个子组件或子功能

❌ 不需要创建模块文件夹的情况：
- 模块简单，1-2 个文档即可说明
- 模块功能单一，无需详细展开

### 模块文件夹结构

```
04-模块文档/
└── [模块名称]/
    ├── 模块介绍.md        # 必选：模块整体介绍
    ├── 架构设计.md        # 可选：模块内部架构
    ├── API文档.md         # 可选：模块 API
    ├── 使用示例.md        # 可选：使用示例
    ├── 配置说明.md        # 可选：配置说明
    └── 常见问题.md        # 可选：模块 FAQ
```

### 模块文档模板

**模块介绍.md**：
```markdown
# [模块名称] 模块

## 概述
[模块功能概述]

## 职责
- [职责 1]
- [职责 2]
- [职责 3]

## 依赖
- [外部依赖 1]
- [外部依赖 2]

## 相关文档
- [API 文档](API文档.md)
- [使用示例](使用示例.md)
```

---

## 命名规范

### 文件夹命名

✅ 规则：
- 使用中文，简洁明了
- 主要文件夹使用数字前缀排序（如 `01-概览/`, `02-开发指南/`）
- 模块文件夹使用模块名称（如 `用户模块/`）

✅ 示例：
- `01-概览/` ✅
- `02-开发指南/` ✅
- `用户模块/` ✅

❌ 避免：
- `overview/` ❌（使用中文）
- `01-Overview/` ❌（使用中文）
- `user-module/` ❌（使用中文）

### 文件命名

✅ 规则：
- 使用中文，描述性强
- 文件名清晰表达文档内容
- 使用 `.md` 扩展名

✅ 示例：
- `项目介绍.md` ✅
- `开发环境.md` ✅
- `用户API.md` ✅

❌ 避免：
- `project-intro.md` ❌（使用中文）
- `dev-env.md` ❌（使用中文）
- `user_api.md` ❌（使用中文）

### 特殊文件

| 文件 | 命名 | 说明 |
|------|------|------|
| 首页 | `README.md` | Wiki 首页，固定名称 |
| 索引 | `README.md` | 文件夹索引，固定名称 |

---

## 必选文档

以下文档在所有模式下都必须创建：

### 1. README.md（首页）

**位置**：`wiki/README.md`

**内容**：
- 项目简介（1-2 段）
- 快速开始（安装、运行）
- 文档导航（目录结构）

### 2. 架构文档

**简单模式位置**：`wiki/架构.md`
**复杂模式位置**：`wiki/01-概览/架构设计.md`

**内容**：
- 系统架构图
- 模块划分
- 技术栈
- 数据流

### 3. 开发指南

**简单模式位置**：`wiki/开发指南.md`
**复杂模式位置**：`wiki/02-开发指南/开发环境.md`

**内容**：
- 开发环境配置
- 代码规范
- 调试技巧

---

## 可选文档

根据项目需求选择性创建：

### API 文档
- **简单模式**：`wiki/API.md`
- **复杂模式**：`wiki/03-API文档/`

### 部署文档
- **简单模式**：`wiki/部署.md`
- **复杂模式**：`wiki/05-部署运维/部署指南.md`

### 常见问题
- **简单模式**：`wiki/常见问题.md`
- **复杂模式**：`wiki/06-常见问题/FAQ.md`

### 模块文档
- 仅在复杂模式下创建
- 位置：`wiki/04-模块文档/[模块名称]/`

---

## 最佳实践

### 1. 结构一致性

✅ 同一项目内的文档结构保持一致
✅ 相似模块的文档结构保持一致
✅ 使用统一的模板

### 2. 导航清晰

✅ 首页提供完整的文档导航
✅ 每个文件夹有 README.md 索引
✅ 文档之间相互链接

### 3. 内容精简

✅ 避免冗余内容
✅ 使用图表和示例代码
✅ 突出重点信息

### 4. 维护更新

✅ 代码变更时同步更新文档
✅ 定期检查文档的准确性
✅ 移除过时内容
